generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        Int    @id @default(autoincrement())
  firstName String
  lastName  String
  email     String @unique
  password  String
  urls      Url[]
}

model Url {
  id               Int                @id @default(autoincrement())
  userId           Int
  code             String             @unique
  originalUrl      String
  user             User               @relation(fields: [userId], references: [id], onDelete: Cascade)
  UrlClickAnalysis UrlClickAnalysis[]
}

model Country {
  id               Int                @id @default(autoincrement())
  code             String             @unique
  name             String
  UrlClickAnalysis UrlClickAnalysis[]
}

model UrlClickAnalysis {
  id        Int      @id @default(autoincrement())
  clickedAt DateTime @default(now())
  ip        String
  countryId Int
  urlId     Int
  Country   Country  @relation(fields: [countryId], references: [id])
  Url       Url      @relation(fields: [urlId], references: [id], onDelete: Cascade)
}
